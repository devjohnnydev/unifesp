{% extends "base.html" %}

{% block title %}Resultados da Análise - TeleAcolhe{% endblock %}

{% block content %}
<section class="section">
    <div class="container">
        <div class="results-container">

            <div class="results-header">
                <h1>Resultados da Análise</h1>
                <p>Baseado nas informações fornecidas, veja abaixo os diagnósticos diferenciais prováveis.</p>
            </div>

            <!-- Atendimento imediato -->
            {% if diagnosis.seek_immediate_care %}
            <div class="alert alert-danger" role="alert">
                <i data-feather="alert-octagon"></i>
                <div>
                    <h3>Atenção: Procure Atendimento Médico Imediatamente</h3>
                    <p>Com base nos sintomas descritos, recomendamos busca imediata de atendimento presencial.</p>
                </div>
            </div>
            {% endif %}

            <!-- Diagnósticos -->
            <div class="section-block">
                <h2>
                    <i data-feather="activity"></i>
                    Possíveis Condições
                </h2>

                <div class="diagnoses-grid">
                    {% for diag in diagnosis.diagnoses %}
                    <div class="diagnosis-card severity-{{ diag.severity|lower|replace('á', 'a')|replace('é', 'e')|replace('í', 'i')|replace('ó','o')|replace('ú','u') }}">
                        <div class="diagnosis-header">
                            <h3>{{ diag.name }}</h3>

                            <span class="probability-badge probability-{{ diag.probability|lower|replace('á', 'a')|replace('é', 'e')|replace('í','i')|replace('ó','o')|replace('ú','u') }}">
                                Probabilidade: {{ diag.probability }}
                            </span>
                        </div>

                        <p class="diagnosis-description">{{ diag.description }}</p>

                        <div class="severity-indicator">
                            <span class="severity-label">Severidade:</span>
                            <span class="severity-value">
                                {{ diag.severity }}
                            </span>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Recomendações -->
            {% if diagnosis.recommendations %}
            <div class="section-block">
                <h2>
                    <i data-feather="check-circle"></i>
                    Recomendações
                </h2>

                <ul class="recommendations-list">
                    {% for recommendation in diagnosis.recommendations %}
                    <li>
                        <i data-feather="check"></i>
                        {{ recommendation }}
                    </li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            <!-- Sinais de alerta -->
            {% if diagnosis.warning_signs %}
            <div class="section-block">
                <h2>
                    <i data-feather="alert-triangle"></i>
                    Sinais de Alerta
                </h2>

                <p class="warning-intro">Procure atendimento médico imediatamente se apresentar:</p>

                <ul class="warning-list">
                    {% for warning in diagnosis.warning_signs %}
                    <li>
                        <i data-feather="alert-circle"></i>
                        {{ warning }}
                    </li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            <!-- Conselho geral -->
            {% if diagnosis.general_advice %}
            <div class="section-block advice-block">
                <h2>
                    <i data-feather="info"></i>
                    Conselho Geral
                </h2>
                <p>{{ diagnosis.general_advice }}</p>
            </div>
            {% endif %}

            <!-- Disclaimer -->
            <div class="disclaimer-box disclaimer-important" role="note">
                <i data-feather="alert-triangle"></i>
                <div>
                    <h3>Importante: Este NÃO é um Diagnóstico Médico</h3>
                    <p>
                        As informações fornecidas são orientações iniciais baseadas em IA
                        e <strong>NÃO substituem</strong> consulta com um profissional de saúde.
                    </p>
                    <p><strong>Sempre consulte um médico</strong> para diagnóstico preciso.</p>
                </div>
            </div>

            <!-- Botões -->
            <div class="results-actions">
                <a href="{{ url_for('main.symptoms_form') }}" class="btn btn-secondary">
                    <i data-feather="rotate-ccw"></i>
                    Nova Consulta
                </a>
                <a href="{{ url_for('main.index') }}" class="btn btn-outline">
                    <i data-feather="home"></i>
                    Voltar ao Início
                </a>
            </div>

        </div>
    </div>
</section>
{% endblock %}
